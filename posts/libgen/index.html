<!DOCTYPE html> <html lang="en" class="single"> <head> <meta charset="utf-8"> <meta http-equiv="X-UA-Compatible" content="IE=edge"> <title>The Library Genesis API — megr.im</title> <meta name="viewport" content="width=device-width, initial-scale=1"/> <meta name="description" content="The very good website of Alex Dunn"/> <meta name="keywords" content="cats, philosophy, twitter"/> <link href="/stylesheets/screen.css" rel="stylesheet" type="text/css" media="screen"/> <link href="/stylesheets/print.css" rel="stylesheet" type="text/css" media="print"/> <script src="//use.typekit.net/rfn3ebf.js"></script> <script>try{Typekit.load();}catch(e){}</script> <!--[if lt IE 9]><script src="http://html5shim.googlecode.com/svn/trunk/html5.js"></script><![endif]--> </head> <body> <p class="assistive-text"><a href="#content-start">Skip to main content</a></p> <header class="page-header" role="banner"> <h1>The Library Genesis API</h1> </header> <main id="content-start" role="main"> <section class="posts"> <p><a href="http://libgen.org/">Library Genesis</a> has an API, but the only API documentation is <a href="http://genofond.org/viewtopic.php?p=39355" title="The Library Genesis Miner's Hut">a forum thread in Russian</a>. So this is an English-language guide to using the LibGen API.</p> <p>(I don&rsquo;t know Russian, and had to read the original thread using <a href="https://translate.google.com/translate?hl=en&amp;sl=auto&amp;tl=en&amp;u=http%3A%2F%2Fgenofond.org%2Fviewtopic.php%3Fp%3D39355">Google Translate</a>, so corrections and additions are very welcome!)</p> <h2 id="toc_0">First, some bad news</h2> <p><em>This is not a search API.</em></p> <p>The API was apparently written to help LibGen maintainers keep their local mirrors up-to-date, which would explain why the API does not support the most common use that Library Genesis is put to by the rest of us: searching for texts. You can&rsquo;t (as far as I can tell) submit a string and get a list of results based on that string.</p> <p>There are two <em>documented</em> ways to use the API to query the LibGen database: by text ID, or by date.</p> <h2 id="toc_1">Querying by ID</h2> <p>Here&rsquo;s how to retrieve information about the text with the coveted IDs of <code>1</code> and <code>2</code>:</p> <pre class="sourceCode shell"><code class="sourceCode shell"><span class="fu">curl</span> <span class="st">&#39;http://libgen.org/json.php?ids=1,2&amp;fields=Title,Author,MD5&#39;</span></code></pre> <p>(The api is available at <code>http://gen.lib.rus.ec/json.php</code> as well.)</p> <p>The above <code>curl</code> request will return an array of JSON objects:</p> <pre class="sourceCode json"><code class="sourceCode json"><span class="re">[</span>
  <span class="re">{</span>
    <span class="kw">&quot;Title&quot;</span><span class="re">:</span><span class="st">&quot;Handbook of Clinical Drug Data&quot;</span><span class="re">,</span>
    <span class="kw">&quot;Author&quot;</span><span class="re">:</span><span class="st">&quot;Philip Anderson&quot;</span><span class="re">,</span>
    <span class="kw">&quot;MD5&quot;</span><span class="re">:</span><span class="st">&quot;7B2A4D53FDE834E801C26A2BAB7E0240&quot;</span>
  <span class="re">}</span><span class="re">,</span>
  <span class="re">{</span>
    <span class="kw">&quot;Title&quot;</span><span class="re">:</span><span class="st">&quot;Handbook of Herbs and Spices&quot;</span><span class="re">,</span>
    <span class="kw">&quot;Author&quot;</span><span class="re">:</span><span class="st">&quot;K V Peter&quot;</span><span class="re">,</span>
    <span class="kw">&quot;MD5&quot;</span><span class="re">:</span><span class="st">&quot;048EA0496DB0444F873139CD705A07AF&quot;</span>
  <span class="re">}</span>
<span class="re">]</span></code></pre> <p>I used these three fields&mdash;<code>Title</code>, <code>Author</code>, and <code>MD5</code>&mdash;because they&rsquo;re all you need in most situations. You can get the page URL by appending the MD5 to <code>http://gen.lib.rus.ec/book/index.php?md5=</code> or to one of the mirrors:</p> <ul> <li><code>http://bookzz.org/md5/</code></li> <li><code>http://bookfi.org/md5/</code></li> </ul> <p>You can create a download URL by appending the MD5 to <code>http://libgen.org/get?md5=</code>.</p> <p>There are other mirrors whose URLs are based on the text&rsquo;s LibGen ID, rather than the MD5:</p> <ul> <li><code>http://libgen.net/view.php?id=</code></li> <li><code>http://www.libgen.net/view.php?id=</code></li> <li><code>http://libgen.info/view.php?id=</code></li> <li><code>http://lib.freescienceengineering.org/view.php?id=</code></li> </ul> <p>You can&rsquo;t get a direct download link for these; you have to go to the page for the text and download from there.</p> <p>But <code>Title</code>, <code>Author</code>, and <code>MD5</code> are far from the only available fields; the full list is below. I haven&rsquo;t figured out what all the fields mean, and keep in mind that it&rsquo;s up to the person uploading a text to add this metadata, so not all texts are well-annotated.</p> <ul> <li><code>ID</code>—the LibGen ID</li> <li><code>Title</code>—the title of the text</li> <li><code>VolumeInfo</code>—the volume number, if the text is part of a multi-volume series</li> <li><code>Series</code>—the series that the text is part of</li> <li><code>Periodical</code></li> <li><code>Author</code>—the author of the text</li> <li><code>Year</code>—the publication date of the text</li> <li><code>Edition</code>—the edition of the text</li> <li><code>Publisher</code>—the publisher of the text</li> <li><code>City</code>—the location of the publisher</li> <li><code>Pages</code>—the number of pages in the text</li> <li><code>Language</code>—the language of the text</li> <li><code>Topic</code>—A number corresponding to the topic of the text; for example, 130 is &ldquo;Mathematics/Logic&rdquo;</li> <li><code>Library</code></li> <li><code>Issue</code></li> <li><code>Identifier</code>—the text&rsquo;s short and long <a href="https://www.isbn-international.org/content/what-isbn">International Standard Book Numbers</a> (not necessarily in that order)</li> <li><code>ISSN</code>—the text&rsquo;s <a href="http://www.issn.org/understanding-the-issn/what-is-an-issn/">International Standard Serial Number</a></li> <li><code>ASIN</code>—the text&rsquo;s <a href="http://www.amazon.com/gp/seller/asin-upc-isbn-info.html">Amazon Standard Identification Number</a></li> <li><code>UDC</code>—the text&rsquo;s <a href="https://en.wikipedia.org/wiki/Universal_Decimal_Classification" title="Wikipedia entry">Universal Decimal Classification</a> number</li> <li><code>LBC</code></li> <li><code>DDC</code>—the text&rsquo;s <a href="https://en.wikipedia.org/wiki/Dewey_Decimal_Classification" title="Wikipedia entry">Dewey Decimal Classification</a> number</li> <li><code>LCC</code>—the text&rsquo;s <a href="https://en.wikipedia.org/wiki/Library_of_Congress_Classification" title="Wikipedia entry">Library of Congress Classification</a> number</li> <li><code>Doi</code>—the file&rsquo;s <a href="https://en.wikipedia.org/wiki/Digital_object_identifier" title="Wikipedia entry">Digital Object Identifier</a></li> <li><code>Googlebookid</code>—the text&rsquo;s <a href="https://developers.google.com/books/docs/v1/using#ids">Google Books ID</a></li> <li><code>OpenLibraryID</code>—the text&rsquo;s <a href="https://openlibrary.org/dev/docs/api/books">Open Library ID</a></li> <li><code>Commentary</code></li> <li><code>DPI</code></li> <li><code>Color</code></li> <li><code>Cleaned</code></li> <li><code>Orientation</code></li> <li><code>Paginated</code>—the text is paginated (<code>1</code>) or not (<code>0</code>)</li> <li><code>Scanned</code>—the text is scanned from a physical copy (<code>1</code>) or not (<code>0</code>)</li> <li><code>Bookmarked</code>—the text has bookmarks (<code>1</code>) or not (<code>0</code>)</li> <li><code>Searchable</code>—the text is searchable (<code>1</code>) or not (<code>0</code>)</li> <li><code>Filesize</code>—the size of the file in bytes</li> <li><code>Extension</code>—the extension of the file (<code>.pdf</code>, <code>.epub</code>, <code>.mobi</code>, etc.)</li> <li><code>MD5</code>—the <a href="http://www.md5.net">MD5</a> hash of the file</li> <li><code>CRC32</code>—the file&rsquo;s <a href="http://www.riccibitti.com/crcguide.htm" title="A painless guide to CRC error detection algorithms">CRC32</a> checksum</li> <li><code>eDonkey</code>—the file&rsquo;s <a href="https://en.wikipedia.org/wiki/Ed2k_URI_scheme" title="Wikipedia entry">eDonkey hash</a></li> <li><code>AICH</code>—the text&rsquo;s <a href="http://www.emule-project.net/home/perl/help.cgi?l=1&amp;rm=show_topic&amp;topic_id=589">eMule file hash</a></li> <li><code>SHA1</code>—the file&rsquo;s <a href="https://en.wikipedia.org/wiki/SHA-1" title="Wikipedia entry">SHA-1</a> hash</li> <li><code>TTH</code>—the file&rsquo;s <a href="https://en.wikipedia.org/wiki/Merkle_tree#Tiger_tree_hash" title="Wikipedia entry">Tiger tree hash</a></li> <li><code>Generic</code></li> <li><code>Filename</code>—the file path in the LibGen database, in the form <code>directory/file</code>. The directory name is the text&rsquo;s LibGen ID rounded to the nearest thousand, and the file name is the MD5 hash in lowercase. (Even though the forward slash is escaped, <a href="https://github.com/lgsoft-developers/libgen/blob/c45f441c7aaa56ae690a6a6503295995a044a76b/util.php" title="LibGen code on GitHub">it&rsquo;s not part of the file name</a>.)</li> <li><code>Visible</code></li> <li><code>Locator</code>—<a href="https://github.com/lgsoft-developers/libgen/blob/c45f441c7aaa56ae690a6a6503295995a044a76b/librarian/form.php#L187" title="LibGen code on GitHub">As far as I can tell</a>, this is the file path of the original file on the machine of whoever uploaded it.</li> <li><code>Local</code></li> <li><code>TimeAdded</code>—the date/time when the text was added to the database, formatted as <code>YYYY-MM-DD HH:MM:SS</code></li> <li><code>TimeLastModified</code>—the date/time when the text&rsquo;s entry in the database was edited, formatted as <code>YYYY-MM-DD HH:MM:SS</code></li> <li><code>Coverurl</code>—the path to the cover image for the text: the <code>Filename</code> followed by a lowercase letter (there&rsquo;s <a href="https://github.com/lgsoft-developers/libgen/blob/c45f441c7aaa56ae690a6a6503295995a044a76b/book/util.php#L30" title="LibGen code on GitHub">a function</a> to determine the letter for each cover, but I don&rsquo;t know enough PHP to understand it).</li> </ul> <h2 id="toc_2">Searching by date</h2> <p>Querying by ID is pretty useless except for internal tasks, so it&rsquo;s the ability to search by date that makes the API at all interesting. When searching by date, you don&rsquo;t send the <code>id</code> parameter to the API, but instead use some (but not all!) of the parameters below:</p> <ul> <li><code>mode</code>—set to <code>last</code>, <code>modified</code>, or <code>newer</code></li> <li><code>timefirst</code>—a date formatted as <code>YYYY-MM-DD</code></li> <li><code>timelast</code>—a date formatted as <code>YYYY-MM-DD</code></li> <li><code>timenewer</code>—a time formatted as <code>YYYY-MM-DD%20HH:MM:SS</code></li> <li><code>idnewer</code>—a LibGen ID</li> <li><code>limit1</code>—an integer</li> <li><code>limit2</code>—an integer</li> </ul> <p>Using these parameters allows you to do two things:</p> <ul> <li><p>retrieve information about a random set of texts from within a specified date range, or</p></li> <li><p>retrieve information about texts modified after a certain time.</p></li> </ul> <h3 id="toc_3">The grab-bag method</h3> <p>The obvious use case for this method is to display a random text or set of texts (perhaps for a Twitter bot). The following parameters and values are allowed here:</p> <ul> <li><p><code>mode</code>—either <code>last</code> or <code>modified</code>. If you use <code>last</code>, the API will match the dates you specify against text&rsquo;s <code>TimeAdded</code>, if you use <code>modified</code>, it will look at <code>TimeLastModified</code>.</p></li> <li><p><code>timefirst</code>—the API will not return texts before this date (checked against either <code>TimeAdded</code> or <code>TimeLastModified</code> depending on what the <code>mode</code> is set to).</p></li> <li><p><code>timelast</code> (optional)—the API will not return texts after this date.</p></li> <li><p><code>limit1</code> and <code>limit2</code> (both optional)—if both of these parameters are set, the number of results returned will be the value of <code>limit2</code>, and the set of results will be offset by the value of <code>limit1</code> (not very important here, where the results are random). If only <code>limit1</code> is set, its value is the number of results returned.</p></li> </ul> <p>Here&rsquo;s an example. This query returns 10 random MD5 hashes for texts added between 1 May 2013 and 1 Janary 2014:</p> <pre class="sourceCode shell"><code class="sourceCode shell"><span
class="fu">curl</span> <span class="st">&#39;http://libgen.org/json.php?fields=MD5&amp;limit1=10&amp;mode=last&amp;timefirst=2013-05-01&amp;timelast=2014-01-01&#39;</span></code></pre> <h3 id="toc_4">The <code>newer</code> method</h3> <p>This method, which is literally <em>newer</em>&mdash;it was added at the beginning of 2014—finally allows the API to effectively serve its intended purpose: incremental updates from one of the main servers to a local mirror.</p> <ul> <li><p><code>mode</code>—must be set to <code>newer</code></p></li> <li><p><code>timenewer</code>—the API will return information on texts <em>modified</em> (not added) after this time, starting with the text closest to the specified time.</p></li> <li><p><code>idnewer</code>—the API will not return information on texts with an ID lower than the value of <code>idnewer</code>, even if it was modified after <code>timenewer</code>. (If you don&rsquo;t care about this parameter you can set it to <code>1</code>, but it is required.)</p></li> <li><p><code>limit1</code> and <code>limit2</code> (optional)—these parameters behave the same as they do with the grab-bag method.</p></li> </ul> <p>You could use this method to display new books, but the grab-bag method can do that well enough for most purposes. I can&rsquo;t think of many uses for <code>newer</code> beyond its original intended one—mirroring the main database.</p> <h2 id="toc_5">Are you sure there&rsquo;s no search API?</h2> <p>Pretty sure, yeah. (There appears to be <a href="http://genofond.org/viewtopic.php?p=22423&amp;sid=a2cc032762a2b853b4354d287e4697e6&amp;usg=ALkJrhjEraSeb6V9MMjk1_OCbXy2Ml_B4Q#p22423" title="Russian forum post">a search API for Bookfi</a>, but you need to request an API key from the author.)</p> <p>But the lack of a search API hasn&rsquo;t stopped people from writing scripts to search for and download texts from Library Genesis:</p> <ul> <li><p>A <a href="https://github.com/anomico/libgen.py" title="GitHub repository">Python script</a> by &ldquo;anomico&rdquo;</p></li> <li><p>An <a href="https://github.com/smargh/alfred_libgen" title="GitHub repository">Alfred workflow</a> by <a href="http://hackademic.postach.io">Stephen Margheim</a></p></li> <li><p>A <a href="https://github.com/toddpress/Looky_Booky" title="GitHub repository">Chrome extension</a> by &ldquo;toddpress&rdquo;</p></li> </ul> <p><a href="https://twitter.com/dunndunndunn" title="Twitter">Let me know</a> if you write your own!</p> </section> <footer class="sub-footer"> <p>Posted on <time datetime="2014-09-30 00:00:00 &#43;0000 UTC">30 September 2014</time>.<a class="reverse" title="Main page" href="/">Go to the main page</a> or see <a class="reverse" href="/posts">all posts</a>.</p> </footer> </main> <footer class="page-footer" role="contentinfo"> <p>Content copyright © 2014 Alex Dunn</p> </footer> </body> </html>